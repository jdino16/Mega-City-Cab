<?xml version="1.0" encoding="UTF-8"?>
<web-app
    version="4.0"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:javaee="http://xmlns.jcp.org/xml/ns/javaee"
    xmlns:xml="http://www.w3.org/XML/1998/namespace"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd">
    <display-name>Mega City Cab Booking Application</display-name>
    <description>
        This web application is designed to manage cab bookings for Mega City Cab.
    </description>

    <!-- ✅ Set the correct welcome page -->
    <welcome-file-list>
        <welcome-file>jsp/index.jsp</welcome-file>
    </welcome-file-list>

    <!-- ✅ User Authentication Servlets -->
<servlet>
    <servlet-name>SignupServlet</servlet-name>
    <servlet-class>com.megacitycab.controllers.SignupServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>SignupServlet</servlet-name>
    <url-pattern>/SignupServlet</url-pattern>
</servlet-mapping>


    <servlet>
        <servlet-name>LoginServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/LoginServlet</url-pattern>
    </servlet-mapping>
        <servlet>
        <servlet-name>LogoutServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.LogoutServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>LogoutServlet</servlet-name>
        <url-pattern>/LogoutServlet</url-pattern>
    </servlet-mapping>

        <!-- ✅ Password Reset Servlets -->
    <servlet>
        <servlet-name>ForgotPasswordServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.ForgotPasswordServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ForgotPasswordServlet</servlet-name>
        <url-pattern>/ForgotPasswordServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ResetPasswordServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.ResetPasswordServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ResetPasswordServlet</servlet-name>
        <url-pattern>/ResetPasswordServlet</url-pattern>
    </servlet-mapping>

 <!-- ✅ Booking Management Servlets -->
    <servlet>
        <servlet-name>BookingServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.BookingServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BookingServlet</servlet-name>
        <url-pattern>/BookingServlet</url-pattern>
    </servlet-mapping>

    <!-- ✅ Fare Calculation Servlet -->
    <servlet>
        <servlet-name>CalculateFareServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.CalculateFareServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>CalculateFareServlet</servlet-name>
        <url-pattern>/CalculateFareServlet</url-pattern>
    </servlet-mapping>

    <!-- ✅ Billing & Transactions Servlet -->
    <servlet>
        <servlet-name>BillingServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.BillingServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>BillingServlet</servlet-name>
        <url-pattern>/BillingServlet</url-pattern>
    </servlet-mapping>

    <!-- ✅ Profile Management Servlet -->
    <servlet>
        <servlet-name>ProfileServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.ProfileServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ProfileServlet</servlet-name>
        <url-pattern>/ProfileServlet</url-pattern>
    </servlet-mapping>

    <!-- ✅ Support & Help Servlet -->
    <servlet>
        <servlet-name>SupportServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.SupportServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>SupportServlet</servlet-name>
        <url-pattern>/SupportServlet</url-pattern>
    </servlet-mapping>
    <!-- ✅ Admin Management Servlets -->
    <servlet>
        <servlet-name>AdminBookingServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.AdminBookingServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AdminBookingServlet</servlet-name>
        <url-pattern>/AdminBookingServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AdminDriverServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.AdminDriverServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AdminDriverServlet</servlet-name>
        <url-pattern>/AdminDriverServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AdminCarServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.AdminCarServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AdminCarServlet</servlet-name>
        <url-pattern>/AdminCarServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>AdminDashboardServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.AdminDashboardServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AdminDashboardServlet</servlet-name>
        <url-pattern>/AdminDashboardServlet</url-pattern>
    </servlet-mapping>

    <!-- ✅ View Users Servlet -->
    <servlet>
        <servlet-name>ViewUsersServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.ViewUsersServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ViewUsersServlet</servlet-name>
        <url-pattern>/ViewUsersServlet</url-pattern>
    </servlet-mapping>

    <servlet>
        <servlet-name>ViewDriversServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.ViewDriversServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>ViewDriversServlet</servlet-name>
        <url-pattern>/ViewDriversServlet</url-pattern>
    </servlet-mapping>

    <!-- Add Driver Servlet -->
    <servlet>
        <servlet-name>AddDriverServlet</servlet-name>
        <servlet-class>com.megacitycab.controllers.AddDriverServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>AddDriverServlet</servlet-name>
        <url-pattern>/AddDriverServlet</url-pattern>
    </servlet-mapping>
    <!-- ✅ UTF-8 Character Encoding -->
    <filter>
        <filter-name>CharacterEncodingFilter</filter-name>
        <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>CharacterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- ✅ Session Timeout Configuration (30 Minutes) -->
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>

    <!-- ✅ Security Constraint (Optional - Add Later) -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Secure Area</web-resource-name>
            <url-pattern>/admin/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>admin</role-name>
        </auth-constraint>
    </security-constraint>

    <security-role>
        <role-name>admin</role-name>
    </security-role>

</web-app>
